#!@PORTAGE_BASH@
# Copyright 1999-2011 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2

source "${PORTAGE_BIN_PATH:-@PORTAGE_BASE@/bin}"/isolated-functions.sh

# PREFIX LOCAL: ignore otherwise failing call
if hasq prefix ${USE} && [[ $EUID != 0 ]] ; then
	ewarn "fowners ignored in Prefix with non-privileged user"
	exit 0
fi
# END PREFIX LOCAL

[[ " ${FEATURES} " == *" force-prefix "* ]] || \
	case "$EAPI" in 0|1|2) ED=${D} ;; esac

# we can't prefix all arguments because
# chown takes random options
slash="/"
chown "${@/#${slash}/${ED}${slash}}"
ret=$?
[[ $ret -ne 0 ]] && helpers_die "${0##*/} failed"
exit $ret

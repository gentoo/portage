#!@PORTAGE_BASH@
# Copyright 1999-2010 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2

source "${PORTAGE_BIN_PATH:-@PORTAGE_BASE@/bin}"/isolated-functions.sh

if [[ $# -ne 2 ]] ; then
	helpers_die "${0##*/}: two arguments needed"
	exit 1
fi

target="${1}"
linkname="${2}"
[[ ${target:0:1} == "/" ]] && target="${EPREFIX}${target}"
destdir=${linkname%/*}
[[ ! -d ${ED}${destdir} ]] && dodir "${destdir}"

ln -snf "${target}" "${ED}/${linkname}"
ret=$?
[[ $ret -ne 0 ]] && helpers_die "${0##*/} failed"
exit $ret
